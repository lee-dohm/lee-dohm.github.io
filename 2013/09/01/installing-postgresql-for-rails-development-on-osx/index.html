<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic|Raleway' rel='stylesheet' type='text/css'>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link type="application/atom+xml" rel="alternate" href="https://www.lee-dohm.com/feed.xml" title="lee-dohm.com" />
    <link rel="icon" type="image/png" href="/favicon-icon.png"/>

    <!-- Bootstrap -->
    <link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen" />

    <!-- Site -->
    <link href="/stylesheets/styles.css" rel="stylesheet" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

    <!-- MathJax -->
    <script type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>

    <!-- Battle for the Net widget https://github.com/fightforthefuture/battleforthenet-widget -->
    <!-- <script src="https://widget.battleforthenet.com/widget.js" async></script> -->

    <!-- analytics.html -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-17382346-2', 'lee-dohm.com');
  ga('send', 'pageview');
</script>

    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Installing PostgreSQL for Rails development on OS X | lee-dohm.com</title>
<meta name="generator" content="Jekyll v4.1.0" />
<meta property="og:title" content="Installing PostgreSQL for Rails development on OS X" />
<meta name="author" content="Lee Dohm" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I’m playing around with writing a Rails application, just to learn new things. At the same time, I wanted to understand why everyone in the Rails community seems to be using Heroku. And since Heroku defaults to using PostgreSQL for the database backend when you use Rails, I have to now set up a PostgreSQL environment on my Mac for development. This turned out to be harder than I first expected. This is how I got it to work." />
<meta property="og:description" content="I’m playing around with writing a Rails application, just to learn new things. At the same time, I wanted to understand why everyone in the Rails community seems to be using Heroku. And since Heroku defaults to using PostgreSQL for the database backend when you use Rails, I have to now set up a PostgreSQL environment on my Mac for development. This turned out to be harder than I first expected. This is how I got it to work." />
<link rel="canonical" href="https://www.lee-dohm.com/2013/09/01/installing-postgresql-for-rails-development-on-osx/" />
<meta property="og:url" content="https://www.lee-dohm.com/2013/09/01/installing-postgresql-for-rails-development-on-osx/" />
<meta property="og:site_name" content="lee-dohm.com" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2013-09-01T11:48:09-07:00" />
<script type="application/ld+json">
{"datePublished":"2013-09-01T11:48:09-07:00","url":"https://www.lee-dohm.com/2013/09/01/installing-postgresql-for-rails-development-on-osx/","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.lee-dohm.com/2013/09/01/installing-postgresql-for-rails-development-on-osx/"},"author":{"@type":"Person","name":"Lee Dohm"},"description":"I’m playing around with writing a Rails application, just to learn new things. At the same time, I wanted to understand why everyone in the Rails community seems to be using Heroku. And since Heroku defaults to using PostgreSQL for the database backend when you use Rails, I have to now set up a PostgreSQL environment on my Mac for development. This turned out to be harder than I first expected. This is how I got it to work.","headline":"Installing PostgreSQL for Rails development on OS X","dateModified":"2013-09-01T11:48:09-07:00","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="../../assets/js/html5shiv.js"></script>
      <script src="../../assets/js/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <nav class="navbar navbar-custom" role="navigation">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">Lee Dohm</a>
        <p class="navbar-text">Games and Technology Should Include EVERYone</p>
      </div>

      <div class="collapse navbar-collapse navbar-ex1-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li><a href="/archives">Archive</a></li>
          <li><a href="/feed.xml">Feed</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/about">About Lee</a></li>
              <li><a href="/this-blog">About This Blog</a></li>
              <li><a href="/appearances">Appearances</a></li>
              <li><a href="/colophon">Colophon</a></li>
              <li><a href="/disclaimer">Disclaimers</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </nav>

    <div class="container">
      <div class="row">
        <div class="row">
          <div class="col-md-8 col-md-offset-2">
            

<div class="content">
  <h1><a class="title" href="/2013/09/01/installing-postgresql-for-rails-development-on-osx/">Installing PostgreSQL for Rails development on OS X</a></h1>
  <!-- dateline.html -->
<h4 class="dateline">
  September 01, 2013
  •
  <a href="/2013/09/01/installing-postgresql-for-rails-development-on-osx/"><span class="octicon octicon-link"></span></a>
</h4>


  <p><em>Edit: Some of the commands below have changed from their initial versions to reflect things I’ve learned since getting it all up and running. It has also been broken out into sections.</em></p>

<p>I’m playing around with writing a <a href="http://rubyonrails.org">Rails</a> application, just to learn new things. At the same time, I wanted to understand why everyone in the Rails community seems to be using <a href="https://www.heroku.com">Heroku</a>. And since Heroku defaults to using <a href="http://www.postgresql.org">PostgreSQL</a> for the database backend when you use Rails, I have to now set up a PostgreSQL environment on my Mac for development. This turned out to be harder than I first expected. This is how I got it to work.</p>

<p>First, I had to realize that PostgreSQL doesn’t just magically get installed when you create a Rails application that is configured to use it <img class="emoji" title=":wink:" alt=":wink:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f609.png" height="20" width="20"> This was pretty easy because the first time I attempted to launch the “Hello, world!” type thing I had written I got the pretty red Rails error message page saying it couldn’t connect to the database. I quickly googled<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote">1</a></sup> for instructions on how to properly install PostgreSQL for Rails development on the Mac and was quite happy to find <a href="http://stackoverflow.com/questions/2271069/installing-postgresql-on-osx-for-rails-development">a StackOverflow answer</a> for this very issue. I thought I was done, but it seems that as the answer was posted over three years ago … let’s just say that the contents may have settled during transit <img class="emoji" title=":laughing:" alt=":laughing:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png" height="20" width="20"> But I was able to use it as a template for how I got things to work and each time I got stuck, it helped me find my way.</p>

<h2 id="installation-and-configuration-of-pgsql">Installation and Configuration of PGSQL</h2>

<p>Instead of downloading the installer and using that, I used <a href="http://brew.sh">Homebrew</a> to install PostgreSQL:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>brew <span class="nb">install </span>postgresql
</code></pre></div></div>

<p>Then I needed to initialize a database environment<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote">2</a></sup> since PostgreSQL needs you to tell it where to put the databases you create. The Homebrew recipe was kind enough to give me the command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>initdb /usr/local/var/postgres <span class="nt">-E</span> utf8
</code></pre></div></div>

<p>Next, I started the server using the command that <code class="language-plaintext highlighter-rouge">initdb</code> conveniently handed me:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>postgres <span class="nt">-D</span> /usr/local/var/postgres
</code></pre></div></div>

<p>In the future, I’ll probably use the <a href="http://www.postgresql.org/docs/9.2/static/app-pg-ctl.html">pg_ctl</a> command to start and stop the server process in the background. But for today, this was good enough.</p>

<h2 id="configuration-of-the-project-to-work-with-pgsql">Configuration of the Project to Work with PGSQL</h2>

<p>At this point, I could actually start messing around with the server and getting things to communicate between Rails and PostgreSQL. Or so I thought. It turns out that Rails, by default, attempts to communicate with PostgreSQL via domain sockets. This is a good thing because they’re system local and <a href="http://momjian.us/main/blogs/pgblog/2012.html#June_6_2012">are much more performant</a> than TCP/IP connections. On the other hand, Rails expects the domain sockets to be created in one directory by default and my PostgreSQL installation was using a slightly different one. After taking a stab at reconfiguring the directory used, I just told Rails to connect via TCP/IP by editing the <code class="language-plaintext highlighter-rouge">config/database.yml</code> file and adding the following line to the <code class="language-plaintext highlighter-rouge">development</code> section:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">host</span><span class="pi">:</span> <span class="s">localhost</span>
</code></pre></div></div>

<p>Which is when I started getting database errors! Progress! <img class="emoji" title=":sunglasses:" alt=":sunglasses:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f60e.png" height="20" width="20"></p>

<p>The database errors told me first that the user Rails was trying to connect with didn’t exist. So I created it by entering:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>createuser <span class="nt">--createdb</span> username
</code></pre></div></div>

<p>The user needs to be created with the <code class="language-plaintext highlighter-rouge">createdb</code> permission so that when executing unit tests, the test database can be dropped and created. I’ve since created a <code class="language-plaintext highlighter-rouge">db:create_user</code> Rake task in my project to perform this for me.</p>

<p>In Homebrew installations it seems that all of the PostgreSQL administration commands are also symlinked to the <code class="language-plaintext highlighter-rouge">/usr/local/bin</code> directory. Very convenient!</p>

<p>Once that was complete, I could execute the standard Rails commands:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>rake db:create
<span class="nv">$ </span>rake db:migrate
<span class="nv">$ </span>rails s
</code></pre></div></div>

<p>to start the server and everything was up and running!</p>

<p>To tell the truth, I was really impressed with how easy everything was once I used Homebrew to install PostgreSQL. One thing led me to another and in many cases if the next step wasn’t obvious, it was provided in the output of the previous step. Hats off to the Homebrew and PostgreSQL folks! <img class="emoji" title=":beer:" alt=":beer:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f37a.png" height="20" width="20"></p>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p>Am I supposed to capitalize it when it is being used as a verb or not? What is the convention on that? Hmmmmm … <a href="#fnref:1" class="reversefootnote" role="doc-backlink">↩</a></p>
    </li>
    <li id="fn:2" role="doc-endnote">
      <p><a href="http://www.postgresql.org/docs/9.2/static/app-initdb.html">The documentation</a> calls it a “database cluster”, but I find that to be a poor choice of phrase given that most people who aren’t database wonks use the term “database” and “server” interchangeably. <a href="#fnref:2" class="reversefootnote" role="doc-backlink">↩</a></p>
    </li>
  </ol>
</div>

</div>
</div>
</div>
</div>
</div></body></html>

          </div>
        </div>

        <div class="col-md-8 col-md-offset-2">
          <hr/>
          <div class="text-center">
            <p>
              <a href="mailto:lee@lee-dohm.com"><span class="octicon octicon-mail"></span></a>&nbsp;&nbsp;
              <a href="https://github.com/lee-dohm"><span class="octicon octicon-mark-github"></span></a>&nbsp;&nbsp;
              <a href="//stackoverflow.com/users/1954/lee"><i class="fa fa-stack-exchange"></i></a>&nbsp;&nbsp;
              <a href="https://twitter.com/leedohm"><i class="fa fa-twitter"></i></a>
            </p>
            <p>
              Copyright &copy; 2010-2022 by Lee Dohm
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="//code.jquery.com/jquery.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js"></script>
    <script src="/javascripts/lightbox.min.js"></script>
  </body>
</html>
